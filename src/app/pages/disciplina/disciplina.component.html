<div class="disciplina-page">
  <h1 *ngIf="isNew">Nova disciplina</h1>
  <h1 *ngIf="!isNew">Editar disciplina</h1>

  <form [formGroup]="form!" (ngSubmit)="salvar()">
    <div class="form-group">
      <label for="name">Nome</label>
      <input
        id="name"
        type="text"
        formControlName="name"
        [class.invalid]="name?.invalid && (name?.touched || name?.dirty)"
      />
      <div class="error" *ngIf="name?.errors && (name?.touched || name?.dirty)">
        <span *ngIf="name?.errors?.['required']">O nome é obrigatório.</span>
        <span *ngIf="name?.errors?.['minlength']">
          O nome deve ter pelo menos
          {{ name?.errors?.['minlength']?.requiredLength }} caracteres.
        </span>
      </div>
    </div>

    <div class="form-group">
      <label for="description">Descrição</label>
      <textarea
        id="description"
        rows="4"
        formControlName="description"
        [class.invalid]="
          description?.invalid &&
          (description?.touched || description?.dirty)
        "
      ></textarea>

      <div
        class="error"
        *ngIf="
          description?.errors &&
          (description?.touched || description?.dirty)
        "
      >
        <span *ngIf="description?.errors?.['required']">
          A descrição é obrigatória.
        </span>
        <span *ngIf="description?.errors?.['minlength']">
          A descrição deve ter pelo menos
          {{ description?.errors?.['minlength']?.requiredLength }}
          caracteres.
        </span>
      </div>
    </div>

    <div *ngIf="error" class="error global-error">
      {{ error }}
    </div>

    <div class="actions">
      <button type="button" (click)="cancelar()">Cancelar</button>
      <button type="submit" [disabled]="loading || form!.invalid">
        {{ isNew ? 'Criar' : 'Salvar' }}
      </button>
    </div>

    <div *ngIf="loading" class="loading">Salvando...</div>
  </form>
</div>
